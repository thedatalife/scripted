<!DOCTYPE html>
<html>
  <head>
    <title>Scripted - Javascript Timeline Library</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet" media="screen">

        <!--link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/2.1.0/normalize.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script-->
        <style type="text/css" rel="stylesheet">
          #main {
            position: absolute;
            z-index: 20;
            width: 100%;
            height: 100%;  
          }
          
          #scriptedA .col-lg-4 {
            opacity: 0;
            height: 180px;
            
            -webkit-transition: all 1s ease-in-out;
            -moz-transition: all 1s ease-in-out;
            -o-transition: all 1s ease-in-out;
            transition: all 1s ease-in-out;
          }
          
          #scriptedA .col-lg-4.show{
            opacity: 1;
          }
          #scriptedA .col-lg-4.highlight{
            background-color: #FFFF99;
          }
          
          #hero-row {
            padding: 24px 0;
            
            -webkit-transition: all 1s ease-in-out;
            -moz-transition: all 1s ease-in-out;
            -o-transition: all 1s ease-in-out;
            transition: all 1s ease-in-out;
          }
          
          #hero-row.highlight {
            background-color: #FFFF99;
          }
          
          #scriptedA4 {
            opacity: 0;
            position: relative;
            left: -100%;
            
            -webkit-transition: all 2s ease-in-out;
            -moz-transition: all 2s ease-in-out;
            -o-transition: all 2s ease-in-out;
            transition: all 2s ease-in-out;
          }
          
          #scriptedA4.show {
            opacity: 1;
            left: 0;
          }
          
          #content-row {
            opacity: 0;
            
            -webkit-transition: all 1s ease-in-out;
            -moz-transition: all 1s ease-in-out;
            -o-transition: all 1s ease-in-out;
            transition: all 1s ease-in-out;
          }
          
          #content-row.show {
            opacity: 1;
          }
          
          #tile-background {
            position: absolute;
            overflow: hidden;
            z-index: 10;
            width: 100%;
            height: 100%;
          }
          
          #tile-background .square {
            background-color: white;
            
            -webkit-transition: all 5s ease-in-out;
            -moz-transition: all 5s ease-in-out;
            -o-transition: all 5s ease-in-out;
            transition: all 5s ease-in-out;
          }
          
          #tile-background .square.show {
            background-color: #EFEFEF;
          }
          
          #transforming-squares {
            position: relative;
            z-index: 150;
            width: 100%;
          }
          
          #transforming-squares div {
            width: 100px;
            height: 100px;
            position: absolute;
            background-color: #DEDEDE;
            top: 40px;
            
            -webkit-transition: all 1s ease-in-out;
            -moz-transition: all 1s ease-in-out;
            -o-transition: all 1s ease-in-out;
            transition: all 1s ease-in-out;
          }
          
          #transforming-squares #squareA {
            left: 10%;
          }
          
          #transforming-squares #squareB {
            right: 10%;
          }
        </style>
    </head>
    
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <div id="main">
          <div class="container">
          <div class="row" id="scriptedA">
            <div id="scriptedA1" class="col-lg-4">
              <h1>Scripted</h1>
              <p>Javascript library for timed actions.</p>
            </div>
            <div id="scriptedA2" class="col-lg-4">
              <h2>Works with jQuery or Zepto.</h2>
              <p>Uses the requestAnimationFrame shim for browser compatibility. Provides Javascript based state changes and plays well with CSS3.</p>
            </div>
            <div id="scriptedA3" class="col-lg-4">
              <h2>Lightweight and flexible.</h2>
              <p>Easy syntax, plenty of options. Multiple Scripted timelines can be used at once.</p>
            </div>
          </div>
            <div class="row" id="transforming-squares">
              <div id="squareA"></div>
              <div id="squareB"></div>
            </div>
          <div id="hero-row" class="row">
            <div id="scriptedA4" class="col-lg-6 col-lg-offset-3">
              <p class="lead"><em>Scripted is designed to bridge the gap between CSS3 animations and cross browser compatible state changes. Rather than relying on keyframes in CSS, the Scripted library is used to create cuepoint actions on a timeline.</em></p>
              <div class="container"><a class="btn btn-primary btn-lg btn-block" href="https://github.com/thedatalife/scripted/blob/master/js/Scripted.js">Try it now.</a></div>
            </div>
          </div>
          <div id="content-row" class="row">
            <div class="col-lg-4">
              <h3>Getting Started:</h3>
              <p>All you need is the Scripted.js file. Include it in your page, order is not necessary, but be sure not to call it before jQuery or Zepto are ready.</p>
              <p>
                <pre>
&lt;script type=&quot;text/javascript&quot; src=&quot;js/Scripted.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot; &gt;
  var S = new Scripted();
  
  S.setupTimer(fps, totalTimeInSeconds, shouldRepeat);
&lt;/script&gt;
                </pre>
              </p>
            </div>
            <div class="col-lg-4">
              <h3>Adding A Script Using The API:</h3>
              <p>The .using() .at() and .every() methods may be used to create a script. If you don't pass in constructor arguments, be sure to call setupTimer(fps, totalTimeInSeconds) before starting the timer.</p>
              <p><pre>
// 60 FPS, 5 Second long timeline
var S = new Scripted(60, 5);
S.using("#element1")
  .at("60 addClass show")
  .at("120 addClass highlight")
  .at("300 removeClass show");
  
S.using("#element2")
  .at("300 addClass show");
  
S.startTimer();
              </pre></p>
            </div>
            <div class="col-lg-4">
              <h3>Adding A JSON Script Using LoadScript:</h3>
              <p>It's possible to prepare JSON scripts in another file and pass them into the Scripted object.</p>
              <p><pre>
var S = new Scripted();

var script = {
  "options": {"fps": 60, "totalTimeInSeconds": 4, "shouldRepeat": true},
  "actions": [
    {
      "using": "#element1",
      "at": [
        "60 addClass highlight",
        "120 removeClass highlight"
      ]
    }
  ]
}

S.loadScript(script);
S.startTimer();
              </pre></p>
            </div>
          </div>
          <footer>
            <p>Copyright 2013 Miles Ryan</p>
          </footer>
        </div>
        </div>
        <div id="tile-background" class="background">
          
        </div>
        
        <script src="js/lib/jQuery.js"></script>
        <script src="js/lib/bootstrap.js"></script>
        <script src="js/Scripted.js"></script>
        <script type="text/javascript">
          var SA, SB, SC;
          $(document).ready(function(){
            
            /* 
              
              Example 1: Using the loadScript method
              
              This example shows how to prepare a JSON script.
              The script could easily be loaded in from an API.
              
            */
            SA = new Scripted(60, 5); // 60fps, 5 seconds long, don't repeat
            scriptA = {
              "actions": [
               {  
                "using": "#scriptedA1",
                "at": [
                  "1 addClass show",
                  "3 addClass highlight",
                ]
               },
               {  
                "using": "#scriptedA2",
                "at": [
                  "2 addClass show"
                ]
               },
               {  
                "using": "#scriptedA3",
                "at": [
                  "3 addClass show"
                ]
               },
               {  
                "using": "#scriptedA4",
                "at": [
                  "3 addClass show"
                ]
               },
               {  
                "using": "#content-row",
                "at": [
                  "3 addClass show"
                ]
               }
              ]
            };
            SA.loadScript(scriptA);

            SA.startTimer();
            
            /*
            
              Example 2: using the .every() method with a function
             
            */
           
            BGTiles.init();
            SB = new Scripted(60, 3, true); // 60fps, 3 seconds, repeating
            SB.using(BGTiles).every("1 callFunction randomizeTiles").startTimer();
            
            /*
            
              Example 3: using the simple API
             
            */
           
            SC = new Scripted(60, 10, true); // 60fps, 10 seconds, repeating
            
            
          });
          
          var BGTiles = {
            init: function() {
              this.$bg = $("#tile-background");
              
              var size = 80,
                width = $(window).width(),
                height = Math.max(
                    $(document).height(),
                    $(window).height(),
                    document.documentElement.clientHeight
                ),
                columns = Math.floor(width / size),
                rows = Math.floor(height / size),
                x = 0,
                y = 0;
              
              this.$bg.css("height", height + "px");
              
              var square = function(width, height, x, y) {
                var s = $("<div class='square'></div>");
                s.css({
                  "width": width,
                  "height": height,
                  "top": y,
                  "left": x,
                  "position": "absolute"
                });
                console.log("new square");
                return s;
              }
                
              for(var r = 0; r <= rows; r++) {
                for(var c = 0; c <= columns; c++) {
                  this.$bg.append(new square(size, size, c * size, r * size));
                }
              }
              console.log(columns, rows);
            },
            randomizeTiles: function() {
              console.log("RANDOMIZE TILES");
              var tileCount = $(".square").length,
                randomTileCount = Math.floor(Math.random() * 10),
                randomIndex = 0,
                $square = null;
                
              for(var i = 0; i < randomTileCount; i++) {
                randomIndex = Math.floor(Math.random() * tileCount);
                $square = $(".square").eq(randomIndex);
                if($square.hasClass("show")){
                  $square.removeClass("show");
                } else {
                  $square.addClass("show");
                }
              }
            }
          }
          
        </script>
    </body>
</html>
