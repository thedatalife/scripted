var Scripted=function(){"use strict";$.extend(true,this,Scripted.properties);this.actions={};if(typeof arguments[0]!=="undefined"&&typeof arguments[1]!=="undefined"){var e=arguments[0],t=arguments[1],n=false;if(typeof arguments[2]!=="undefined"){n=arguments[2]}this.setupTimer(e,t,n)}};Scripted.properties={timer:null,isTimerRunning:false,fps:60,delay:18,totalTimeInSeconds:10,totalTimeInFrames:600,shouldRepeat:true,timestamp:0,loopCounter:0,currentTime:0,currentFrame:0,actions:null};Scripted.actionMethods={addClass:function(e,t,n){$(e).addClass(t)},removeClass:function(e,t,n){$(e).removeClass(t)},callFunction:function(e,t,n){var r=$.proxy(e[t],e);r(n)}};Scripted.prototype={setupTimer:function(e,t,n){this.delay=this.delay=Number(1e3/e).toPrecision(2);this.totalTimeInFrames=e*t;this.isTimerRunning=false;this.fps=e;this.shouldRepeat=n;this.totalTimeInSeconds=t;this.resetTimer()},startTimer:function(){this.isTimerRunning=true;this.timestamp=Date.now();this.timer=requestAnimationFrame($.proxy(this.timerLoop,this))},pauseTimer:function(){this.isTimerRunning=false},stopTimer:function(){this.isTimerRunning=false},using:function(e){this.scope=e;return this},at:function(e){this.parseScript(e);return this},every:function(e){this.parseEveryScript(e);return this},loadScript:function(e){this.parseJsonScript(e)},resetTimer:function(){this.loopCounter=0;this.currentTime=0;this.currentFrame=0},timerLoop:function(){var e=Date.now();var t=e-this.timestamp;this.loopCounter+=t;this.currentTime+=t;while(this.loopCounter>this.delay){this.loopCounter-=this.delay;this.frameLoop()}if(this.isTimerRunning){this.timestamp=e;this.timer=requestAnimationFrame($.proxy(this.timerLoop,this))}},frameLoop:function(){this.currentFrame++;var e="frame"+this.currentFrame;if(this.actions.hasOwnProperty(e)){var t=this.actions[e].length;for(var n=0;n<t;n++){this.actions[e][n](Scripted.actionMethods,this.currentFrame)}}if(this.currentFrame>=this.totalTimeInFrames){if(this.shouldRepeat){this.resetTimer()}else{this.resetTimer();this.isTimerRunning=false}}},parseScript:function(e){try{var t=e.split(" ");var n="frame"+Math.round(Number(t[0])*this.fps),r=t[1],i=t[2],s=this.scope;if(!this.actions.hasOwnProperty(n)){this.actions[n]=[]}this.actions[n].push(function(e,t){e[r](s,i,t)})}catch(o){}},parseEveryScript:function(e){var t=e.split(" ");var n=Number(t[0]),r=t[1],i=t[2],s=n,o=this.totalTimeInFrames/n;for(var u=0;u<=o;u++){this.at(s+" "+r+" "+i);s+=n}},parseJsonScript:function(e){if(e.hasOwnProperty("options")){this.setupTimer(e.options.fps,e.options.totalTimeInSeconds,e.options.shouldRepeat)}var t=e.actions.length,n=0,r=0,i=null;for(n=0;n<t;n++){i=e.actions[n];this.using(i.using);for(r=0;r<i.at.length;r++){this.at(i.at[r])}}}};(function(){Date.now||(Date.now=function(){return+(new Date)});var e=0;var t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(t,n){var r=(new Date).getTime();var i=Math.max(0,16-(r-e));var s=window.setTimeout(function(){t(r+i)},i);e=r+i;return s};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(e){clearTimeout(e)}})()